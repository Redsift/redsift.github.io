<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ansible"><meta property="og:title" content><meta property="og:description" content="Ansible InGRAINd provides Ansible roles in the repository that you can lift and integrate into your deployment systems.
The role installs OSQuery by default on compatible systems, which means you can use the InGRAINd - OSQuery bridge to gather a wide range of system statistics using a single configuration file.
Configuration To keep configuration as simple as possible, the role relies on the following variables:
ingraind_circleci_url ingraind_circleci_sha256 ingraind_http_api_key ingraind_http_uri  By default the agent will send events to an HTTP backend periodically."><meta property="og:type" content="article"><meta property="og:url" content="http://ingrain.redsift.io/docs/deployment/ansible/"><title>Ansible | InGRAINd</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.edc993575be58655f3e49634e3ca6db09cc38ac9aa03ecdbe81d941636e35273.css integrity="sha256-7cmTV1vlhlXz5JY048ptsJzDismqA+zb6B2UFjbjUnM="><script defer src=/en.search.min.f7de6780f855bd2cf5f009bf673503feede5e809394aa30eff833b6de50dbe31.js integrity="sha256-995ngPhVvSz18Am/ZzUD/u3l6Ak5SqMO/4M7beUNvjE="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>InGRAINd</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><a href=/><strong>InGRAINd</strong></a></p></li><li><p><a href=/docs/getting-started/>Getting started</a></p></li><li><p><a href=/docs/configuration/syntax/>Configuration</a></p><ul><li><a href=/docs/configuration/containers/>Container monitoring</a></li><li><a href=/docs/configuration/network/>Network monitoring</a></li><li><a href=/docs/configuration/auto-kill/>Auto-kill programs</a></li><li><a href=/docs/configuration/backends/>Backends</a></li></ul></li><li><p><a href=/docs/deployment/strategies/>Deployment</a></p><ul><li><a href=/docs/deployment/kubernetes/>Kubernetes</a></li><li><a href=/docs/deployment/ansible/ class=active>Ansible/SystemD</a></li></ul></li><li><p><a href=/docs/grain/intro/>Extending InGRAINd</a></p><ul><li><a href=/docs/grain/cargo-bpf/>cargo bpf</a></li><li><a href=/docs/grain/ebpf/>Writing an eBPF module</a></li><li><a href=/docs/grain/userspace/>Userspace events</a></li><li>Advanced<ul><li><a href=/docs/devel/profiling/>Profiling</a></li><li><a href=/docs/devel/performance/>Performance</a></li><li><a href=/docs/devel/internals/>Internals</a></li></ul></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Ansible</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#configuration>Configuration</a></li><li><a href=#systemd>SystemD</a></li><li><a href=#keeping-up-to-date>Keeping up-to-date</a></li></ul></nav></aside></header><article class=markdown><h1 id=ansible>Ansible</h1><p>InGRAINd provides <a href=https://ansible.com>Ansible</a> roles <a href=https://github.com/redsift/ingraind/tree/master/ansible/roles/ingraind>in the
repository</a>
that you can lift and integrate into your deployment systems.</p><p>The role installs OSQuery by default on compatible systems, which
means you can use the InGRAINd - OSQuery bridge to gather a wide range
of system statistics using a single <a href=https://github.com/redsift/ingraind/blob/master/ansible/roles/ingraind/templates/etc/ingraind/ingraind.toml.j2>configuration
file</a>.</p><h2 id=configuration>Configuration</h2><p>To keep configuration as simple as possible, the role relies on the
following
<a href=https://github.com/redsift/ingraind/blob/master/ansible/roles/ingraind/vars/main.yml>variables</a>:</p><pre><code>ingraind_circleci_url
ingraind_circleci_sha256
ingraind_http_api_key
ingraind_http_uri
</code></pre><p>By default the agent will send events to an HTTP backend periodically.</p><h2 id=systemd>SystemD</h2><p>The Ansible role, by default, deploys a <a href=%60https://github.com/redsift/ingraind/blob/master/deploy/ansible/roles/ingraind/templates/etc/systemd/system/ingraind.service.j2%60>SystemD service
file</a>
and configures it to use the configuration location for
<a href=https://github.com/redsift/ingraind/blob/master/deploy/ansible/roles/ingraind/templates/etc/ingraind/ingraind.toml.j2><code>/etc/ingraind/ingraind.toml</code></a>.</p><h2 id=keeping-up-to-date>Keeping up-to-date</h2><p>To keep InGRAINd up-to-date, we will reference the URL and hash of the
latest stable release in the repository&rsquo;s <a href=https://github.com/redsift/ingraind/blob/master/ansible/roles/ingraind/vars/main.yml>variables
file</a>,
so you can synchronise the role and override the default variables in
your deployment.</p></article><footer class=book-footer><div class="flex justify-between"></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#configuration>Configuration</a></li><li><a href=#systemd>SystemD</a></li><li><a href=#keeping-up-to-date>Keeping up-to-date</a></li></ul></nav></aside></main></body></html>