<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Configuration syntax The configuration format used by ingraind is TOML.
The primary goal of the configuration system is to set up the grains and the processing pipelines used by ingraind.
The TOML file has two sections: the probes, and the pipelines.
Probes The probe array contains the configuration for the probes, and a single entry looks like this:
[[probe]] pipelines = [&#34;my_pipeline&#34;, &#34;another_pipeline&#34;] [probe.config] type = &#34;Files&#34; monitor_dirs = [&#34;/&#34;] The probe has to specify a list of pipelines that will receive its data."><meta property="og:title" content><meta property="og:description" content="Configuration syntax The configuration format used by ingraind is TOML.
The primary goal of the configuration system is to set up the grains and the processing pipelines used by ingraind.
The TOML file has two sections: the probes, and the pipelines.
Probes The probe array contains the configuration for the probes, and a single entry looks like this:
[[probe]] pipelines = [&#34;my_pipeline&#34;, &#34;another_pipeline&#34;] [probe.config] type = &#34;Files&#34; monitor_dirs = [&#34;/&#34;] The probe has to specify a list of pipelines that will receive its data."><meta property="og:type" content="article"><meta property="og:url" content="http://ingrain.redsift.io/docs/configuration/syntax/"><meta property="article:modified_time" content="2020-02-21T16:59:47+00:00"><title>Syntax | InGRAINd</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/scss/main.min.a14d05fdf76e6a363a60cb3916eada636791db552d7dfbdbed811f0e94949d30.css integrity="sha256-oU0F/fduajY6YMs5FuraY2eR21Utffvb7YEfDpSUnTA="><script defer src=/en.search.min.70910593e77336d697e5d3d4bc993888220cdc9015258355843e3016ab5e3ca8.js integrity="sha256-cJEFk+dzNtaX5dPUvJk4iCIM3JAVJYNVhD4wFqtePKg="></script><link href="https://fonts.googleapis.com/css?family=Raleway:400,500,600,700,900%7cSource+Code+Pro:400,500&display=swap" rel=stylesheet></head><body class=fixed-position><div id=wrapper><a class=accessibility href=#main>Skip to Content</a><header id=header><div class=container><strong class=logo><a href=#><img src=images/logo.svg width=135 alt=Ingraind></a></strong>
<a class=nav-opener href=#>nav-opener<span></span></a><div class=drop><nav class=nav><ul class=menu><li><a href=#>Why?</a></li><li class=active><a href=#>Documentation</a></li><li><a href=/api/redbpf/>API</a></li><li><a href=https://blog.redsift.com/category/labs/>Blog</a></li></ul></nav><ul class=social-networks><li><a href=#><i class=icon-github></i>github</a></li><li><a href=#><i class=icon-twitter></i>twitter</a></li></ul></div></div></header><main id=main><div class="container inner-container"><aside class=sidebar><div class=fixed-block><nav class="nav-holder hide"><strong class="logo hide"><a href=/><img src=/svg/logo.svg alt=ingraind width=135></a>
<span>v1.0</span></strong><form action=# class=form-search><label class=hidden for=search>Search</label>
<input id=book-search-input type=search placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results class=nav-list></ul></form><ul><li><p><a href=/docs/getting-started/>Getting started</a></p></li><li><p><a href=/docs/configuration/syntax/ class=active>Configuration</a></p><ul><li><a href=/docs/configuration/containers/>Container monitoring</a></li><li><a href=/docs/configuration/network/>Network monitoring</a></li><li><a href=/docs/configuration/auto-kill/>Auto-kill programs</a></li><li><a href=/docs/configuration/backends/>Backends</a></li><li><a href=/docs/configuration/statsd/>StatsD server</a></li><li><a href=/docs/configuration/osquery/>OsQuery</a></li></ul></li><li><p><a href=/docs/deployment/strategies/>Deployment</a></p><ul><li><a href=/docs/deployment/kubernetes/>Kubernetes</a></li><li><a href=/docs/deployment/ansible/>Ansible/SystemD</a></li></ul></li><li><p><a href=/docs/grain/intro/>Extending InGRAINd</a></p><ul><li><a href=/docs/grain/cargo-bpf/>cargo bpf</a></li><li><a href=/docs/grain/ebpf/>Writing an eBPF module</a></li><li><a href=/docs/grain/userspace/>Userspace events</a></li><li>Advanced<ul><li><a href=/docs/devel/profiling/>Profiling</a></li><li><a href=/docs/devel/performance/>Performance</a></li><li><a href=/docs/devel/internals/>Internals</a></li></ul></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></div></aside><div class=content><article class=markdown><h1 id=configuration-syntax>Configuration syntax</h1><p>The configuration format used by <code>ingraind</code> is TOML.</p><p>The primary goal of the configuration system is to set up the grains and the
processing pipelines used by <code>ingraind</code>.</p><p>The TOML file has two sections: the probes, and the pipelines.</p><h2 id=probes>Probes</h2><p>The <code>probe</code> array contains the configuration for the probes, and a single entry
looks like this:</p><pre><code>[[probe]]
pipelines = [&quot;my_pipeline&quot;, &quot;another_pipeline&quot;]

[probe.config]
type = &quot;Files&quot;
monitor_dirs = [&quot;/&quot;]
</code></pre><p>The <code>probe</code> has to specify a list of pipelines that will receive its data.
The <code>probe.config</code> section configures the probe itself; the <code>type</code> attribute is
mandatory, anything else is probe dependent.</p><p>The different brackets in <code>[[probe]]</code> and <code>[probe.config]</code> are intentional:
<code>[[probe]]</code> means a new entry in the <code>probe</code> array, while <code>[probe.config]</code> means
&ldquo;the <code>config</code> attribute of the probe&rdquo;.</p><h2 id=pipelines>Pipelines</h2><p>The pipelines are named sequences of actions. Some steps in the pipeline will
have state, so be aware that multiple probes targeting the pipeline with the
same name, will use the same <em>instance</em> of the pipeline.</p><p>Configuration of pipelines looks like this:</p><pre><code>[pipeline.my_pipeline.config]
backend = &quot;StatsD&quot;
use_tags = true

[[pipeline.statsd.steps]]
type = &quot;Whitelist&quot;
allow = [&quot;k1&quot;, &quot;k2&quot;]

[[pipeline.statsd.steps]]
type = &quot;AddSystemDetails&quot;

[[pipeline.statsd.steps]]
type = &quot;Buffer&quot;
interval_s = 30
</code></pre><p>The distinction between the <code>[pipeline.statsd.config]</code> and
<code>[[pipeline.statsd.steps]]</code> are the same as previously.</p><p>Events generated by the <code>probe</code> will hit the first step in the pipeline. Steps
are defined in sequence, and events will trickle through every step, unless they
are filtered out.</p><p>The <code>pipeline.name.config.backend</code> specifies which backend is used to
transmit or store the events after every step in the pipeline is complete, and
is a mandatory attribute.
Other attributes in the <code>pipeline.name.config</code> section are dependent on the
given backend.</p></article></div><aside class="aside hide"><div class=fixed-block><h3>Contents</h3><nav id=TableOfContents><ul><li><a href=#probes>Probes</a></li><li><a href=#pipelines>Pipelines</a></li></ul></nav></div></aside></div></main><footer id=footer><div class=container><span class=copy>&copy; 2020 <a href=#>Red Sift</a>. All rights reserved.</span><div class=social-block><ul class=social-networks><li><strong class=title>Follow</strong></li><li><a href=#><i class=icon-github></i>github</a></li><li><a href=#><i class=icon-twitter></i>twitter</a></li></ul></div></div></footer><a class=accessibility href=#wrapper>Back to top</a></div></body></html>