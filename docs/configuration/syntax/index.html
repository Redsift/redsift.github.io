<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Syntax"><meta property="og:title" content><meta property="og:description" content="Configuration syntax The configuration format used by ingraind is TOML.
The primary goal of the configuration system is to set up the grains and the processing pipelines used by ingraind.
The TOML file has two sections: the probes, and the pipelines.
Probes The probe array contains the configuration for the probes, and a single entry looks like this:
[[probe]] pipelines = [&#34;my_pipeline&#34;, &#34;another_pipeline&#34;] [probe.config] type = &#34;Files&#34; monitor_dirs = [&#34;/&#34;] The probe has to specify a list of pipelines that will receive its data."><meta property="og:type" content="article"><meta property="og:url" content="http://ingrain.redsift.io/docs/configuration/syntax/"><title>Syntax | InGRAINd</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.edc993575be58655f3e49634e3ca6db09cc38ac9aa03ecdbe81d941636e35273.css integrity="sha256-7cmTV1vlhlXz5JY048ptsJzDismqA+zb6B2UFjbjUnM="><script defer src=/en.search.min.f7de6780f855bd2cf5f009bf673503feede5e809394aa30eff833b6de50dbe31.js integrity="sha256-995ngPhVvSz18Am/ZzUD/u3l6Ak5SqMO/4M7beUNvjE="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>InGRAINd</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><a href=/><strong>InGRAINd</strong></a></p></li><li><p><a href=/docs/getting-started/>Getting started</a></p></li><li><p><a href=/docs/configuration/syntax/ class=active>Configuration</a></p><ul><li><a href=/docs/configuration/containers/>Container monitoring</a></li><li><a href=/docs/configuration/network/>Network monitoring</a></li><li><a href=/docs/configuration/auto-kill/>Auto-kill programs</a></li><li><a href=/docs/configuration/backends/>Backends</a></li></ul></li><li><p><a href=/docs/deployment/strategies/>Deployment</a></p><ul><li><a href=/docs/deployment/kubernetes/>Kubernetes</a></li><li><a href=/docs/deployment/ansible/>Ansible/SystemD</a></li></ul></li><li><p><a href=/docs/grain/intro/>Extending InGRAINd</a></p><ul><li><a href=/docs/grain/cargo-bpf/>cargo bpf</a></li><li><a href=/docs/grain/ebpf/>Writing an eBPF module</a></li><li><a href=/docs/grain/userspace/>Userspace events</a></li><li>Advanced<ul><li><a href=/docs/devel/profiling/>Profiling</a></li><li><a href=/docs/devel/performance/>Performance</a></li><li><a href=/docs/devel/internals/>Internals</a></li></ul></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Syntax</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#probes>Probes</a></li><li><a href=#pipelines>Pipelines</a></li></ul></nav></aside></header><article class=markdown><h1 id=configuration-syntax>Configuration syntax</h1><p>The configuration format used by <code>ingraind</code> is TOML.</p><p>The primary goal of the configuration system is to set up the grains and the
processing pipelines used by <code>ingraind</code>.</p><p>The TOML file has two sections: the probes, and the pipelines.</p><h2 id=probes>Probes</h2><p>The <code>probe</code> array contains the configuration for the probes, and a single entry
looks like this:</p><pre><code>[[probe]]
pipelines = [&quot;my_pipeline&quot;, &quot;another_pipeline&quot;]

[probe.config]
type = &quot;Files&quot;
monitor_dirs = [&quot;/&quot;]
</code></pre><p>The <code>probe</code> has to specify a list of pipelines that will receive its data.
The <code>probe.config</code> section configures the probe itself; the <code>type</code> attribute is
mandatory, anything else is probe dependent.</p><p>The different brackets in <code>[[probe]]</code> and <code>[probe.config]</code> are intentional:
<code>[[probe]]</code> means a new entry in the <code>probe</code> array, while <code>[probe.config]</code> means
&ldquo;the <code>config</code> attribute of the probe&rdquo;.</p><h2 id=pipelines>Pipelines</h2><p>The pipelines are named sequences of actions. Some steps in the pipeline will
have state, so be aware that multiple probes targeting the pipeline with the
same name, will use the same <em>instance</em> of the pipeline.</p><p>Configuration of pipelines looks like this:</p><pre><code>[pipeline.my_pipeline.config]
backend = &quot;StatsD&quot;
use_tags = true

[[pipeline.statsd.steps]]
type = &quot;Whitelist&quot;
allow = [&quot;k1&quot;, &quot;k2&quot;]

[[pipeline.statsd.steps]]
type = &quot;AddSystemDetails&quot;

[[pipeline.statsd.steps]]
type = &quot;Buffer&quot;
interval_s = 30
</code></pre><p>The distinction between the <code>[pipeline.statsd.config]</code> and
<code>[[pipeline.statsd.steps]]</code> are the same as previously.</p><p>Events generated by the <code>probe</code> will hit the first step in the pipeline. Steps
are defined in sequence, and events will trickle through every step, unless they
are filtered out.</p><p>The <code>pipeline.name.config.backend</code> specifies which backend is used to
transmit or store the events after every step in the pipeline is complete, and
is a mandatory attribute.
Other attributes in the <code>pipeline.name.config</code> section are dependent on the
given backend.</p></article><footer class=book-footer><div class="flex justify-between"></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#probes>Probes</a></li><li><a href=#pipelines>Pipelines</a></li></ul></nav></aside></main></body></html>