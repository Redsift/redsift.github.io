<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Osquery"><meta property="og:title" content><meta property="og:description" content="OsQuery OsQuery is an endpoint visibility solution originally developed at Facebook, and now maintained by The Linux Foundation.
While OsQuery is most often deployed to monitor laptops and desktop computers, we included it in the default InGRAINd Docker images to collect dynamic configuration and runtime information about your environment.
For instance, you can use the OsQuery integration to report statistics about your processes CPU use periodically using the following configuration:"><meta property="og:type" content="article"><meta property="og:url" content="http://ingrain.redsift.io/docs/configuration/osquery/"><title>Osquery | InGRAINd</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.edc993575be58655f3e49634e3ca6db09cc38ac9aa03ecdbe81d941636e35273.css integrity="sha256-7cmTV1vlhlXz5JY048ptsJzDismqA+zb6B2UFjbjUnM="><script defer src=/en.search.min.095efb27360ecd09957abf08f97b49b5fd8bc0bbc88a024d78f45ee65080e56c.js integrity="sha256-CV77JzYOzQmVer8I+XtJtf2LwLvIigJNePRe5lCA5Ww="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>InGRAINd</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><a href=/docs/getting-started/>Getting started</a></p></li><li><p><a href=/docs/configuration/syntax/>Configuration</a></p><ul><li><a href=/docs/configuration/containers/>Container monitoring</a></li><li><a href=/docs/configuration/network/>Network monitoring</a></li><li><a href=/docs/configuration/auto-kill/>Auto-kill programs</a></li><li><a href=/docs/configuration/backends/>Backends</a></li><li><a href=/docs/configuration/statsd/>StatsD server</a></li><li><a href=/docs/configuration/osquery/ class=active>OsQuery</a></li></ul></li><li><p><a href=/docs/deployment/strategies/>Deployment</a></p><ul><li><a href=/docs/deployment/kubernetes/>Kubernetes</a></li><li><a href=/docs/deployment/ansible/>Ansible/SystemD</a></li></ul></li><li><p><a href=/docs/grain/intro/>Extending InGRAINd</a></p><ul><li><a href=/docs/grain/cargo-bpf/>cargo bpf</a></li><li><a href=/docs/grain/ebpf/>Writing an eBPF module</a></li><li><a href=/docs/grain/userspace/>Userspace events</a></li><li>Advanced<ul><li><a href=/docs/devel/profiling/>Profiling</a></li><li><a href=/docs/devel/performance/>Performance</a></li><li><a href=/docs/devel/internals/>Internals</a></li></ul></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Osquery</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class=markdown><h1 id=osquery>OsQuery</h1><p><a href=https://osquery.io/>OsQuery</a> is an endpoint visibility solution
originally developed at Facebook, and now maintained by The Linux
Foundation.</p><p>While OsQuery is most often deployed to monitor laptops and desktop
computers, we included it in the default InGRAINd Docker images to
collect dynamic configuration and runtime information about your
environment.</p><p>For instance, you can use the OsQuery integration to report statistics
about your processes CPU use periodically using the following
configuration:</p><pre><code>[[probe]]
pipelines = [&quot;console&quot;]
[probe.config]
type = &quot;Osquery&quot;
interval_ms = 10000

[[probe.config.queries]]
query = &quot;SELECT user_time, name as process_str, pid as process_id from processes&quot;
name = &quot;process_user_time&quot;
measurement = &quot;user_time&quot;
measurement_type = &quot;count&quot;

[[probe.config.queries]]
query = &quot;SELECT system_time, name as process_str, pid as process_id from processes&quot;
name = &quot;process_system_time&quot;
measurement = &quot;system_time&quot;
measurement_type = &quot;count&quot;
</code></pre><p>The config above will run the <code>SELECT</code> queries every 10 seconds.</p><p>In the emitted events, every column referenced in the <code>SELECT</code>
statement will create a new tag. You can also specify which of the
selected fields should be treated as a measurement, and the associated
unit of measurement.</p></article><footer class=book-footer><div class="flex justify-between"></div><div class=book-comments></div></footer></div><aside class=book-toc><nav id=TableOfContents></nav></aside></main></body></html>